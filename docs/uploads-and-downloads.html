<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 9 Uploads and Downloads | Mastering Shiny Solutions</title>
  <meta name="description" content="A solutions manual to Hadley Wickham’s Mastering Shiny." />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 9 Uploads and Downloads | Mastering Shiny Solutions" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A solutions manual to Hadley Wickham’s Mastering Shiny." />
  <meta name="github-repo" content="marlycormar/mastering_shiny_book_solutions" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 9 Uploads and Downloads | Mastering Shiny Solutions" />
  
  <meta name="twitter:description" content="A solutions manual to Hadley Wickham’s Mastering Shiny." />
  

<meta name="author" content="Maya Gans and Marly Gotti" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="user-feedback.html"/>
<link rel="next" href="dynamic-ui.html"/>
<script src="libs/header-attrs-2.3/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-102068953-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-102068953-3');
</script>



<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Mastering Shiny Solutions</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#note-boxes"><i class="fa fa-check"></i>Note Boxes</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#license"><i class="fa fa-check"></i>License</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i><b>1</b> Preface</a></li>
<li class="chapter" data-level="2" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html"><i class="fa fa-check"></i><b>2</b> Your First Shiny App</a>
<ul>
<li class="chapter" data-level="" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html#exercise-2.8.1"><i class="fa fa-check"></i>Exercise 2.8.1</a></li>
<li class="chapter" data-level="" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html#exercise-2.8.2"><i class="fa fa-check"></i>Exercise 2.8.2</a></li>
<li class="chapter" data-level="" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html#exercise-2.8.3"><i class="fa fa-check"></i>Exercise 2.8.3</a></li>
<li class="chapter" data-level="" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html#exercise-2.8.4"><i class="fa fa-check"></i>Exercise 2.8.4</a></li>
<li class="chapter" data-level="" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html#exercise-2.8.5"><i class="fa fa-check"></i>Exercise 2.8.5</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="basic-ui.html"><a href="basic-ui.html"><i class="fa fa-check"></i><b>3</b> Basic UI</a>
<ul>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.2.8.1"><i class="fa fa-check"></i>Exercise 3.2.8.1</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.2.8.2"><i class="fa fa-check"></i>Exercise 3.2.8.2</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.2.8.3"><i class="fa fa-check"></i>Exercise 3.2.8.3</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.2.8.4"><i class="fa fa-check"></i>Exercise 3.2.8.4</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.2.8.5"><i class="fa fa-check"></i>Exercise 3.2.8.5</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.3.5.1"><i class="fa fa-check"></i>Exercise 3.3.5.1</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.3.5.2"><i class="fa fa-check"></i>Exercise 3.3.5.2</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.3.5.3"><i class="fa fa-check"></i>Exercise 3.3.5.3</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.4.6.1"><i class="fa fa-check"></i>Exercise 3.4.6.1</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.4.6.2"><i class="fa fa-check"></i>Exercise 3.4.6.2</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="basic-reactivity.html"><a href="basic-reactivity.html"><i class="fa fa-check"></i><b>4</b> Basic Reactivity</a>
<ul>
<li class="chapter" data-level="" data-path="basic-reactivity.html"><a href="basic-reactivity.html#exercise-4.3.6.1"><i class="fa fa-check"></i>Exercise 4.3.6.1</a></li>
<li class="chapter" data-level="" data-path="basic-reactivity.html"><a href="basic-reactivity.html#exercise-4.3.6.2"><i class="fa fa-check"></i>Exercise 4.3.6.2</a></li>
<li class="chapter" data-level="" data-path="basic-reactivity.html"><a href="basic-reactivity.html#exercise-4.4.6.1"><i class="fa fa-check"></i>Exercise 4.4.6.1</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="case-study-er-injuries.html"><a href="case-study-er-injuries.html"><i class="fa fa-check"></i><b>5</b> Case Study: ER Injuries</a>
<ul>
<li class="chapter" data-level="" data-path="case-study-er-injuries.html"><a href="case-study-er-injuries.html#exercise-5.8.1"><i class="fa fa-check"></i>Exercise 5.8.1</a></li>
<li class="chapter" data-level="" data-path="case-study-er-injuries.html"><a href="case-study-er-injuries.html#exercise-5.8.2"><i class="fa fa-check"></i>Exercise 5.8.2</a></li>
<li class="chapter" data-level="" data-path="case-study-er-injuries.html"><a href="case-study-er-injuries.html#exercise-5.8.3"><i class="fa fa-check"></i>Exercise 5.8.3</a></li>
<li class="chapter" data-level="" data-path="case-study-er-injuries.html"><a href="case-study-er-injuries.html#exercise-5.8.4"><i class="fa fa-check"></i>Exercise 5.8.4</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="workflow.html"><a href="workflow.html"><i class="fa fa-check"></i><b>6</b> Workflow</a></li>
<li class="chapter" data-level="7" data-path="graphics.html"><a href="graphics.html"><i class="fa fa-check"></i><b>7</b> Graphics</a>
<ul>
<li class="chapter" data-level="" data-path="graphics.html"><a href="graphics.html#exercise-7.5.1"><i class="fa fa-check"></i>Exercise 7.5.1</a></li>
<li class="chapter" data-level="" data-path="graphics.html"><a href="graphics.html#exercise-7.5.2"><i class="fa fa-check"></i>Exercise 7.5.2</a></li>
<li class="chapter" data-level="" data-path="graphics.html"><a href="graphics.html#exercise-7.5.3"><i class="fa fa-check"></i>Exercise 7.5.3</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="user-feedback.html"><a href="user-feedback.html"><i class="fa fa-check"></i><b>8</b> User Feedback</a></li>
<li class="chapter" data-level="9" data-path="uploads-and-downloads.html"><a href="uploads-and-downloads.html"><i class="fa fa-check"></i><b>9</b> Uploads and Downloads</a>
<ul>
<li class="chapter" data-level="" data-path="uploads-and-downloads.html"><a href="uploads-and-downloads.html#exercise-9.4.1"><i class="fa fa-check"></i>Exercise 9.4.1</a></li>
<li class="chapter" data-level="" data-path="uploads-and-downloads.html"><a href="uploads-and-downloads.html#exercise-9.4.2"><i class="fa fa-check"></i>Exercise 9.4.2</a></li>
<li class="chapter" data-level="" data-path="uploads-and-downloads.html"><a href="uploads-and-downloads.html#exercise-9.4.3"><i class="fa fa-check"></i>Exercise 9.4.3</a></li>
<li class="chapter" data-level="" data-path="uploads-and-downloads.html"><a href="uploads-and-downloads.html#exercise-9.4.4"><i class="fa fa-check"></i>Exercise 9.4.4</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="dynamic-ui.html"><a href="dynamic-ui.html"><i class="fa fa-check"></i><b>10</b> Dynamic UI</a>
<ul>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.1.5.1"><i class="fa fa-check"></i>Exercise 10.1.5.1</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.1.5.2"><i class="fa fa-check"></i>Exercise 10.1.5.2</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.1.5.3"><i class="fa fa-check"></i>Exercise 10.1.5.3</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.1.5.4"><i class="fa fa-check"></i>Exercise 10.1.5.4</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.1.5.5"><i class="fa fa-check"></i>Exercise 10.1.5.5</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.2.3.1"><i class="fa fa-check"></i>Exercise 10.2.3.1</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.2.3.2"><i class="fa fa-check"></i>Exercise 10.2.3.2</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.2.3.3"><i class="fa fa-check"></i>Exercise 10.2.3.3</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.3.4.1"><i class="fa fa-check"></i>Exercise 10.3.4.1</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.3.4.2"><i class="fa fa-check"></i>Exercise 10.3.4.2</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.3.4.3"><i class="fa fa-check"></i>Exercise 10.3.4.3</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.3.4.4"><i class="fa fa-check"></i>Exercise 10.3.4.4</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.3.4.5"><i class="fa fa-check"></i>Exercise 10.3.4.5</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="bookmarking.html"><a href="bookmarking.html"><i class="fa fa-check"></i><b>11</b> Bookmarking</a>
<ul>
<li class="chapter" data-level="" data-path="bookmarking.html"><a href="bookmarking.html#exercise-11.3.1"><i class="fa fa-check"></i>Exercise 11.3.1</a></li>
<li class="chapter" data-level="" data-path="bookmarking.html"><a href="bookmarking.html#exercise-11.3.2"><i class="fa fa-check"></i>Exercise 11.3.2</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="tidy-evaluation.html"><a href="tidy-evaluation.html"><i class="fa fa-check"></i><b>12</b> Tidy Evaluation</a></li>
<li class="chapter" data-level="13" data-path="general-guidelines.html"><a href="general-guidelines.html"><i class="fa fa-check"></i><b>13</b> General Guidelines</a></li>
<li class="chapter" data-level="14" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>14</b> Functions</a>
<ul>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-14.4.1"><i class="fa fa-check"></i>Exercise 14.4.1</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-14.4.2"><i class="fa fa-check"></i>Exercise 14.4.2</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-14.4.3"><i class="fa fa-check"></i>Exercise 14.4.3</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="modules.html"><a href="modules.html"><i class="fa fa-check"></i><b>15</b> Modules</a>
<ul>
<li class="chapter" data-level="" data-path="modules.html"><a href="modules.html#exercise-15.6.1"><i class="fa fa-check"></i>Exercise 15.6.1</a></li>
<li class="chapter" data-level="" data-path="modules.html"><a href="modules.html#exercise-15.6.2"><i class="fa fa-check"></i>Exercise 15.6.2</a></li>
<li class="chapter" data-level="" data-path="modules.html"><a href="modules.html#exercise-15.6.3"><i class="fa fa-check"></i>Exercise 15.6.3</a></li>
<li class="chapter" data-level="" data-path="modules.html"><a href="modules.html#exercise-15.6.4"><i class="fa fa-check"></i>Exercise 15.6.4</a></li>
<li class="chapter" data-level="" data-path="modules.html"><a href="modules.html#exercise-15.6.5"><i class="fa fa-check"></i>Exercise 15.6.5</a></li>
<li class="chapter" data-level="" data-path="modules.html"><a href="modules.html#exercise-15.6.6"><i class="fa fa-check"></i>Exercise 15.6.6</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="packages.html"><a href="packages.html"><i class="fa fa-check"></i><b>16</b> Packages</a></li>
<li class="chapter" data-level="17" data-path="testing.html"><a href="testing.html"><i class="fa fa-check"></i><b>17</b> Testing</a></li>
<li class="chapter" data-level="18" data-path="safety.html"><a href="safety.html"><i class="fa fa-check"></i><b>18</b> Safety</a></li>
<li class="chapter" data-level="19" data-path="performance.html"><a href="performance.html"><i class="fa fa-check"></i><b>19</b> Performance</a></li>
<li class="chapter" data-level="20" data-path="why-reactivity.html"><a href="why-reactivity.html"><i class="fa fa-check"></i><b>20</b> Why reactivity?</a></li>
<li class="chapter" data-level="21" data-path="dependency-tracking.html"><a href="dependency-tracking.html"><i class="fa fa-check"></i><b>21</b> Dependency Tracking</a></li>
<li class="chapter" data-level="22" data-path="scoping.html"><a href="scoping.html"><i class="fa fa-check"></i><b>22</b> Scoping</a></li>
<li class="chapter" data-level="23" data-path="reactive-components.html"><a href="reactive-components.html"><i class="fa fa-check"></i><b>23</b> Reactive Components</a></li>
<li class="chapter" data-level="24" data-path="advanced-ui.html"><a href="advanced-ui.html"><i class="fa fa-check"></i><b>24</b> Advanced UI</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Mastering Shiny Solutions</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="uploads-and-downloads" class="section level1" number="9">
<h1><span class="header-section-number">Chapter 9</span> Uploads and Downloads</h1>
<div class="TODO">
This chapter is in development...
</div>
<div id="exercise-9.4.1" class="section level3 unnumbered" number="">
<h3>Exercise 9.4.1</h3>
<p>Use the ambient package by Thomas Lin Pedersen to generate <a href="https://ambient.data-imaginist.com/reference/noise_worley.html">worley noise</a> and download a PNG of it.</p>
<div id="solution" class="section level4 unnumbered solution" number="">
<h4>Solution</h4>
<p>A general method for saving a <code>PNG</code> is to select the <code>png</code> driver using the function <code>png()</code>. The only argument the driver needs is the name of the plot (this will be stored relative to your current working directory!). You will not see the plot when running the <code>plot</code> function because it is being saved to the file instead. When we’re done plotting, we used the <code>dev.off()</code> command to close to the connection to the driver.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="uploads-and-downloads.html#cb33-1"></a><span class="kw">library</span>(ambient)</span>
<span id="cb33-2"><a href="uploads-and-downloads.html#cb33-2"></a>noise &lt;-<span class="st"> </span>ambient<span class="op">::</span><span class="kw">noise_worley</span>(<span class="kw">c</span>(<span class="dv">100</span>, <span class="dv">100</span>))</span>
<span id="cb33-3"><a href="uploads-and-downloads.html#cb33-3"></a></span>
<span id="cb33-4"><a href="uploads-and-downloads.html#cb33-4"></a><span class="kw">png</span>(<span class="st">&quot;noise_plot.png&quot;</span>)</span>
<span id="cb33-5"><a href="uploads-and-downloads.html#cb33-5"></a><span class="kw">plot</span>(<span class="kw">as.raster</span>(<span class="kw">normalise</span>(noise)))</span>
<span id="cb33-6"><a href="uploads-and-downloads.html#cb33-6"></a><span class="kw">dev.off</span>()</span></code></pre></div>
</div>
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
</div>
<div id="exercise-9.4.2" class="section level3 unnumbered" number="">
<h3>Exercise 9.4.2</h3>
<p>Create an app that lets you upload a csv file, select a variable, and then perform a <code>t.test()</code> on that variable. After the user has uploaded the csv file, you’ll need to use <code>updateSelectInput()</code> to fill in the available variables. See Section 10.1 for details.</p>
<div id="solution-1" class="section level4 unnumbered solution" number="">
<h4>Solution</h4>
<p>We can use the <code>fileInput</code> widget and the <code>accept</code> argument to ensure our app only takes on <code>.csv</code>s. In the <code>server</code> function we’ll select the <code>datapath</code> from within our file input and use this to update our <code>selectInput</code>. We need to put the <code>updateSelectInput</code> within a reactive because we need the options to change if the user selects another file. Lastly, we use <code>input$variable</code> to create our t-test output.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="uploads-and-downloads.html#cb34-1"></a><span class="kw">library</span>(shiny)</span>
<span id="cb34-2"><a href="uploads-and-downloads.html#cb34-2"></a></span>
<span id="cb34-3"><a href="uploads-and-downloads.html#cb34-3"></a>ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</span>
<span id="cb34-4"><a href="uploads-and-downloads.html#cb34-4"></a>    <span class="kw">sidebarLayout</span>(</span>
<span id="cb34-5"><a href="uploads-and-downloads.html#cb34-5"></a>        <span class="kw">sidebarPanel</span>(</span>
<span id="cb34-6"><a href="uploads-and-downloads.html#cb34-6"></a>            <span class="kw">fileInput</span>(<span class="st">&quot;file&quot;</span>, <span class="st">&quot;Select CSV&quot;</span>, <span class="dt">accept =</span> <span class="st">&quot;.csv&quot;</span>), <span class="co"># file widget</span></span>
<span id="cb34-7"><a href="uploads-and-downloads.html#cb34-7"></a>            <span class="kw">selectInput</span>(<span class="st">&quot;variable&quot;</span>, <span class="st">&quot;Select Variable&quot;</span>, <span class="dt">choices =</span> <span class="ot">NULL</span>) <span class="co"># select widget</span></span>
<span id="cb34-8"><a href="uploads-and-downloads.html#cb34-8"></a>        ),</span>
<span id="cb34-9"><a href="uploads-and-downloads.html#cb34-9"></a>        <span class="kw">mainPanel</span>(</span>
<span id="cb34-10"><a href="uploads-and-downloads.html#cb34-10"></a>           <span class="kw">verbatimTextOutput</span>(<span class="st">&quot;results&quot;</span>) <span class="co"># t-test results</span></span>
<span id="cb34-11"><a href="uploads-and-downloads.html#cb34-11"></a>        )</span>
<span id="cb34-12"><a href="uploads-and-downloads.html#cb34-12"></a>    )</span>
<span id="cb34-13"><a href="uploads-and-downloads.html#cb34-13"></a>)</span>
<span id="cb34-14"><a href="uploads-and-downloads.html#cb34-14"></a></span>
<span id="cb34-15"><a href="uploads-and-downloads.html#cb34-15"></a>server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output,session) {</span>
<span id="cb34-16"><a href="uploads-and-downloads.html#cb34-16"></a></span>
<span id="cb34-17"><a href="uploads-and-downloads.html#cb34-17"></a>    <span class="co"># get data from file</span></span>
<span id="cb34-18"><a href="uploads-and-downloads.html#cb34-18"></a>    data &lt;-<span class="st"> </span><span class="kw">reactive</span>({</span>
<span id="cb34-19"><a href="uploads-and-downloads.html#cb34-19"></a>        <span class="kw">req</span>(input<span class="op">$</span>file)</span>
<span id="cb34-20"><a href="uploads-and-downloads.html#cb34-20"></a>        <span class="kw">read.csv</span>(input<span class="op">$</span>file<span class="op">$</span>datapath)</span>
<span id="cb34-21"><a href="uploads-and-downloads.html#cb34-21"></a>    })</span>
<span id="cb34-22"><a href="uploads-and-downloads.html#cb34-22"></a></span>
<span id="cb34-23"><a href="uploads-and-downloads.html#cb34-23"></a>    <span class="co"># create the select input based on the numeric columns in the dataframe</span></span>
<span id="cb34-24"><a href="uploads-and-downloads.html#cb34-24"></a>    <span class="kw">observeEvent</span>( input<span class="op">$</span>file, {</span>
<span id="cb34-25"><a href="uploads-and-downloads.html#cb34-25"></a>        num_cols &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">select_if</span>(<span class="kw">data</span>(), is.numeric)</span>
<span id="cb34-26"><a href="uploads-and-downloads.html#cb34-26"></a>        <span class="kw">updateSelectInput</span>(session, <span class="st">&quot;variable&quot;</span>, <span class="dt">choices =</span> <span class="kw">colnames</span>(num_cols))</span>
<span id="cb34-27"><a href="uploads-and-downloads.html#cb34-27"></a>    })</span>
<span id="cb34-28"><a href="uploads-and-downloads.html#cb34-28"></a></span>
<span id="cb34-29"><a href="uploads-and-downloads.html#cb34-29"></a>    <span class="co"># print t-test results</span></span>
<span id="cb34-30"><a href="uploads-and-downloads.html#cb34-30"></a>    output<span class="op">$</span>results &lt;-<span class="st"> </span><span class="kw">renderPrint</span>({</span>
<span id="cb34-31"><a href="uploads-and-downloads.html#cb34-31"></a>        <span class="kw">req</span>(<span class="op">!</span><span class="kw">is.null</span>(input<span class="op">$</span>variable))</span>
<span id="cb34-32"><a href="uploads-and-downloads.html#cb34-32"></a>        <span class="kw">t.test</span>(<span class="kw">data</span>()[input<span class="op">$</span>variable])</span>
<span id="cb34-33"><a href="uploads-and-downloads.html#cb34-33"></a>        })</span>
<span id="cb34-34"><a href="uploads-and-downloads.html#cb34-34"></a>}</span>
<span id="cb34-35"><a href="uploads-and-downloads.html#cb34-35"></a></span>
<span id="cb34-36"><a href="uploads-and-downloads.html#cb34-36"></a><span class="kw">shinyApp</span>(<span class="dt">ui =</span> ui, <span class="dt">server =</span> server)</span></code></pre></div>
</div>
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
</div>
<div id="exercise-9.4.3" class="section level3 unnumbered" number="">
<h3>Exercise 9.4.3</h3>
<p>Create an app that lets the user upload a csv file, select one variable, draw a histogram, and then download the histogram. For an additional challenge, allow the user to select from .png, .pdf, and .svg output formats.</p>
<div id="solution-2" class="section level4 unnumbered solution" number="">
<h4>Solution</h4>
<p>Adapting the code from the example above, rather than print a t-test output, we create a plot reactive to use in the UI’s <code>output$results</code> and to use within our <code>downloadHander</code>. We can use the <code>ggsave</code> function to switch between <code>input$extension</code> types.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="uploads-and-downloads.html#cb35-1"></a><span class="kw">library</span>(shiny)</span>
<span id="cb35-2"><a href="uploads-and-downloads.html#cb35-2"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb35-3"><a href="uploads-and-downloads.html#cb35-3"></a></span>
<span id="cb35-4"><a href="uploads-and-downloads.html#cb35-4"></a>ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</span>
<span id="cb35-5"><a href="uploads-and-downloads.html#cb35-5"></a>    <span class="kw">tagList</span>(</span>
<span id="cb35-6"><a href="uploads-and-downloads.html#cb35-6"></a>        <span class="kw">br</span>(), <span class="kw">br</span>(),</span>
<span id="cb35-7"><a href="uploads-and-downloads.html#cb35-7"></a>        <span class="kw">column</span>(<span class="dv">4</span>,</span>
<span id="cb35-8"><a href="uploads-and-downloads.html#cb35-8"></a>               <span class="kw">wellPanel</span>(</span>
<span id="cb35-9"><a href="uploads-and-downloads.html#cb35-9"></a>                   <span class="kw">fileInput</span>(<span class="st">&quot;file&quot;</span>, <span class="st">&quot;Select CSV&quot;</span>, <span class="dt">accept =</span> <span class="st">&quot;.csv&quot;</span>), <span class="co"># file widget</span></span>
<span id="cb35-10"><a href="uploads-and-downloads.html#cb35-10"></a>                   <span class="kw">selectInput</span>(<span class="st">&quot;variable&quot;</span>, <span class="st">&quot;Select Variable&quot;</span>, <span class="dt">choices =</span> <span class="ot">NULL</span>), <span class="co"># select widget</span></span>
<span id="cb35-11"><a href="uploads-and-downloads.html#cb35-11"></a>               ),</span>
<span id="cb35-12"><a href="uploads-and-downloads.html#cb35-12"></a>               <span class="kw">wellPanel</span>(</span>
<span id="cb35-13"><a href="uploads-and-downloads.html#cb35-13"></a>                   <span class="kw">radioButtons</span>(<span class="st">&quot;extension&quot;</span>, <span class="st">&quot;Save As:&quot;</span>, <span class="dt">choices =</span> <span class="kw">c</span>(<span class="st">&quot;png&quot;</span>, <span class="st">&quot;pdf&quot;</span>, <span class="st">&quot;svg&quot;</span>), <span class="dt">inline =</span> <span class="ot">TRUE</span>),</span>
<span id="cb35-14"><a href="uploads-and-downloads.html#cb35-14"></a>                   <span class="kw">downloadButton</span>(<span class="st">&quot;download&quot;</span>, <span class="st">&quot;Save Plot&quot;</span>)</span>
<span id="cb35-15"><a href="uploads-and-downloads.html#cb35-15"></a>               )</span>
<span id="cb35-16"><a href="uploads-and-downloads.html#cb35-16"></a>             ),</span>
<span id="cb35-17"><a href="uploads-and-downloads.html#cb35-17"></a>        <span class="kw">column</span>(<span class="dv">8</span>, <span class="kw">plotOutput</span>(<span class="st">&quot;results&quot;</span>))</span>
<span id="cb35-18"><a href="uploads-and-downloads.html#cb35-18"></a>    )</span>
<span id="cb35-19"><a href="uploads-and-downloads.html#cb35-19"></a>)</span>
<span id="cb35-20"><a href="uploads-and-downloads.html#cb35-20"></a></span>
<span id="cb35-21"><a href="uploads-and-downloads.html#cb35-21"></a>server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output,session) {</span>
<span id="cb35-22"><a href="uploads-and-downloads.html#cb35-22"></a></span>
<span id="cb35-23"><a href="uploads-and-downloads.html#cb35-23"></a>    <span class="co"># get data from file</span></span>
<span id="cb35-24"><a href="uploads-and-downloads.html#cb35-24"></a>    data &lt;-<span class="st"> </span><span class="kw">reactive</span>({</span>
<span id="cb35-25"><a href="uploads-and-downloads.html#cb35-25"></a>        <span class="kw">req</span>(input<span class="op">$</span>file)</span>
<span id="cb35-26"><a href="uploads-and-downloads.html#cb35-26"></a>        <span class="kw">read.csv</span>(input<span class="op">$</span>file<span class="op">$</span>datapath)</span>
<span id="cb35-27"><a href="uploads-and-downloads.html#cb35-27"></a>    })</span>
<span id="cb35-28"><a href="uploads-and-downloads.html#cb35-28"></a></span>
<span id="cb35-29"><a href="uploads-and-downloads.html#cb35-29"></a>    <span class="co"># create the select input based on the numeric columns in the dataframe</span></span>
<span id="cb35-30"><a href="uploads-and-downloads.html#cb35-30"></a>    <span class="kw">observeEvent</span>( input<span class="op">$</span>file, {</span>
<span id="cb35-31"><a href="uploads-and-downloads.html#cb35-31"></a>        num_cols &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">select_if</span>(<span class="kw">data</span>(), is.numeric)</span>
<span id="cb35-32"><a href="uploads-and-downloads.html#cb35-32"></a>        <span class="kw">updateSelectInput</span>(session, <span class="st">&quot;variable&quot;</span>, <span class="dt">choices =</span> <span class="kw">colnames</span>(num_cols))</span>
<span id="cb35-33"><a href="uploads-and-downloads.html#cb35-33"></a>    })</span>
<span id="cb35-34"><a href="uploads-and-downloads.html#cb35-34"></a></span>
<span id="cb35-35"><a href="uploads-and-downloads.html#cb35-35"></a>    <span class="co"># plot histogram</span></span>
<span id="cb35-36"><a href="uploads-and-downloads.html#cb35-36"></a>    plot_output &lt;-<span class="st"> </span><span class="kw">reactive</span>({</span>
<span id="cb35-37"><a href="uploads-and-downloads.html#cb35-37"></a>        <span class="kw">req</span>(<span class="op">!</span><span class="kw">is.null</span>(input<span class="op">$</span>variable))</span>
<span id="cb35-38"><a href="uploads-and-downloads.html#cb35-38"></a></span>
<span id="cb35-39"><a href="uploads-and-downloads.html#cb35-39"></a>        <span class="kw">ggplot</span>(<span class="kw">data</span>()) <span class="op">+</span></span>
<span id="cb35-40"><a href="uploads-and-downloads.html#cb35-40"></a><span class="st">            </span><span class="kw">aes_string</span>(<span class="dt">x =</span> input<span class="op">$</span>variable) <span class="op">+</span></span>
<span id="cb35-41"><a href="uploads-and-downloads.html#cb35-41"></a><span class="st">            </span><span class="kw">geom_histogram</span>()</span>
<span id="cb35-42"><a href="uploads-and-downloads.html#cb35-42"></a>        })</span>
<span id="cb35-43"><a href="uploads-and-downloads.html#cb35-43"></a></span>
<span id="cb35-44"><a href="uploads-and-downloads.html#cb35-44"></a>    output<span class="op">$</span>results &lt;-<span class="st"> </span><span class="kw">renderPlot</span>(<span class="kw">plot_output</span>())</span>
<span id="cb35-45"><a href="uploads-and-downloads.html#cb35-45"></a></span>
<span id="cb35-46"><a href="uploads-and-downloads.html#cb35-46"></a>    <span class="co"># save histogram using downloadHandler and plot output type</span></span>
<span id="cb35-47"><a href="uploads-and-downloads.html#cb35-47"></a>    output<span class="op">$</span>download &lt;-<span class="st"> </span><span class="kw">downloadHandler</span>(</span>
<span id="cb35-48"><a href="uploads-and-downloads.html#cb35-48"></a>        <span class="dt">filename =</span> <span class="kw">paste0</span>(<span class="st">&quot;histogram.&quot;</span>, input<span class="op">$</span>extension),</span>
<span id="cb35-49"><a href="uploads-and-downloads.html#cb35-49"></a>        <span class="dt">content =</span> <span class="cf">function</span>(file){</span>
<span id="cb35-50"><a href="uploads-and-downloads.html#cb35-50"></a>            <span class="kw">ggsave</span>(file, <span class="kw">plot_output</span>(), <span class="dt">device =</span> input<span class="op">$</span>extension)</span>
<span id="cb35-51"><a href="uploads-and-downloads.html#cb35-51"></a>        }</span>
<span id="cb35-52"><a href="uploads-and-downloads.html#cb35-52"></a>    )</span>
<span id="cb35-53"><a href="uploads-and-downloads.html#cb35-53"></a></span>
<span id="cb35-54"><a href="uploads-and-downloads.html#cb35-54"></a>}</span>
<span id="cb35-55"><a href="uploads-and-downloads.html#cb35-55"></a></span>
<span id="cb35-56"><a href="uploads-and-downloads.html#cb35-56"></a><span class="kw">shinyApp</span>(<span class="dt">ui =</span> ui, <span class="dt">server =</span> server)</span></code></pre></div>
</div>
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
</div>
<div id="exercise-9.4.4" class="section level3 unnumbered" number="">
<h3>Exercise 9.4.4</h3>
<p>Write an app that allows the user to create a Lego mosaic from any .png file using Ryan Timpe’s brickr package. Once you’ve completed the basics, add controls to allow the user to select the size of the mosaic (in bricks), and choose whether to use “universal” or “generic” colour palettes.</p>
<div id="solution-3" class="section level4 unnumbered solution" number="">
<h4>Solution</h4>
<p>Instead of limiting our file selection to a <code>csv</code> as above, here we are going to limit our input to a <code>png</code>. We’ll use the <code>png::readPNG</code> function to read in our file, and specify the size and color of our mosaic in <code>brickr</code>’s <code>image_to_mosaic</code> function. Read more about the package and examples <a href="https://github.com/ryantimpe/brickr">here</a></p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="uploads-and-downloads.html#cb36-1"></a><span class="kw">library</span>(shiny)</span>
<span id="cb36-2"><a href="uploads-and-downloads.html#cb36-2"></a><span class="kw">library</span>(brickr)</span>
<span id="cb36-3"><a href="uploads-and-downloads.html#cb36-3"></a><span class="kw">library</span>(png)</span>
<span id="cb36-4"><a href="uploads-and-downloads.html#cb36-4"></a></span>
<span id="cb36-5"><a href="uploads-and-downloads.html#cb36-5"></a>ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</span>
<span id="cb36-6"><a href="uploads-and-downloads.html#cb36-6"></a>    <span class="kw">sidebarLayout</span>(</span>
<span id="cb36-7"><a href="uploads-and-downloads.html#cb36-7"></a>        <span class="kw">sidebarPanel</span>(</span>
<span id="cb36-8"><a href="uploads-and-downloads.html#cb36-8"></a>            <span class="kw">fluidRow</span>(</span>
<span id="cb36-9"><a href="uploads-and-downloads.html#cb36-9"></a>                <span class="kw">fileInput</span>(<span class="st">&quot;myFile&quot;</span>, <span class="st">&quot;Choose a file&quot;</span>, <span class="dt">accept =</span> <span class="kw">c</span>(<span class="st">&#39;image/png&#39;</span>)),</span>
<span id="cb36-10"><a href="uploads-and-downloads.html#cb36-10"></a>                <span class="kw">sliderInput</span>(<span class="st">&quot;size&quot;</span>, <span class="st">&quot;Select Size:&quot;</span>, <span class="dt">min =</span> <span class="dv">1</span>, <span class="dt">max =</span> <span class="dv">100</span>, <span class="dt">value =</span> <span class="dv">35</span>),</span>
<span id="cb36-11"><a href="uploads-and-downloads.html#cb36-11"></a>                <span class="kw">radioButtons</span>(<span class="st">&quot;color&quot;</span>, <span class="st">&quot;Select Color Palette:&quot;</span>, <span class="dt">choices =</span> <span class="kw">c</span>(<span class="st">&quot;universal&quot;</span>, <span class="st">&quot;generic&quot;</span>))</span>
<span id="cb36-12"><a href="uploads-and-downloads.html#cb36-12"></a>            )</span>
<span id="cb36-13"><a href="uploads-and-downloads.html#cb36-13"></a>        ),</span>
<span id="cb36-14"><a href="uploads-and-downloads.html#cb36-14"></a>        <span class="kw">mainPanel</span>(<span class="kw">plotOutput</span>(<span class="st">&quot;result&quot;</span>))</span>
<span id="cb36-15"><a href="uploads-and-downloads.html#cb36-15"></a>    )</span>
<span id="cb36-16"><a href="uploads-and-downloads.html#cb36-16"></a>)</span>
<span id="cb36-17"><a href="uploads-and-downloads.html#cb36-17"></a></span>
<span id="cb36-18"><a href="uploads-and-downloads.html#cb36-18"></a></span>
<span id="cb36-19"><a href="uploads-and-downloads.html#cb36-19"></a>server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output) {</span>
<span id="cb36-20"><a href="uploads-and-downloads.html#cb36-20"></a></span>
<span id="cb36-21"><a href="uploads-and-downloads.html#cb36-21"></a>    <span class="kw">observeEvent</span>(input<span class="op">$</span>myFile, {</span>
<span id="cb36-22"><a href="uploads-and-downloads.html#cb36-22"></a>        inFile &lt;-<span class="st"> </span>input<span class="op">$</span>myFile</span>
<span id="cb36-23"><a href="uploads-and-downloads.html#cb36-23"></a>        <span class="cf">if</span> (<span class="kw">is.null</span>(inFile))</span>
<span id="cb36-24"><a href="uploads-and-downloads.html#cb36-24"></a>            <span class="kw">return</span>()</span>
<span id="cb36-25"><a href="uploads-and-downloads.html#cb36-25"></a></span>
<span id="cb36-26"><a href="uploads-and-downloads.html#cb36-26"></a>        output<span class="op">$</span>result &lt;-<span class="st"> </span><span class="kw">renderPlot</span>({</span>
<span id="cb36-27"><a href="uploads-and-downloads.html#cb36-27"></a>            png<span class="op">::</span><span class="kw">readPNG</span>(inFile<span class="op">$</span>datapath) <span class="op">%&gt;%</span></span>
<span id="cb36-28"><a href="uploads-and-downloads.html#cb36-28"></a><span class="st">                </span><span class="kw">image_to_mosaic</span>(<span class="dt">img_size =</span> input<span class="op">$</span>size, <span class="dt">color_palette =</span> input<span class="op">$</span>color) <span class="op">%&gt;%</span></span>
<span id="cb36-29"><a href="uploads-and-downloads.html#cb36-29"></a><span class="st">                </span><span class="kw">build_mosaic</span>()</span>
<span id="cb36-30"><a href="uploads-and-downloads.html#cb36-30"></a>        })</span>
<span id="cb36-31"><a href="uploads-and-downloads.html#cb36-31"></a>    })</span>
<span id="cb36-32"><a href="uploads-and-downloads.html#cb36-32"></a></span>
<span id="cb36-33"><a href="uploads-and-downloads.html#cb36-33"></a>}</span>
<span id="cb36-34"><a href="uploads-and-downloads.html#cb36-34"></a><span class="kw">shinyApp</span>(<span class="dt">ui =</span> ui, <span class="dt">server =</span> server)</span></code></pre></div>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="user-feedback.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="dynamic-ui.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/marlycormar/mastering_shiny_book_solutions/edit/master/action-transfer.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": {},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
